!function(){var e,t;history.pushState&&window.nunjucksENV&&((t=/bjx:nonce=([^;]+)/.exec(document.cookie))&&t[1]&&(t=(e=Date.now())+ +t[1],$.ajax({url:"/api/get_rand",type:"POST",data:{t:e,r:t},cache:!1}).done(function(e){})),window.anchorClick=function(a,n){var e=window.net_loading();$.ajax({url:a,type:"GET",data:"ajax=1",cache:!1,dataType:"json",timeout:1e4}).done(function(e){try{var t=window.nunjucksENV.render("gongsi_cont.htm",e);$("#render_slot").html(t),n&&n.setURL&&history.pushState(null,null,a),n&&n.goTop&&$("html,body").scrollTop($("#render_slot").offset().top-20),e.seo&&e.seo.title&&$("title").text(e.seo.title)}catch(i){console.error(i)}}).fail(function(e){/刷新/.test(e.responseText)&&(location.href=a)}).always(function(){e.remove()})},$(window).on("popstate",function(e){var t=location.pathname+location.search;e.preventDefault(),window.anchorClick(t),window.set_args(1)}),$("#render_slot").on("click",".cc-pagelist a",function(e){var t=$(this).attr("href");t&&"javascript:;"!==t&&(e.preventDefault(),window.anchorClick(t,{setURL:1,goTop:1}))}))}(),function(){$("input, textarea").placeholder();var d={},h=function h(e){e?$.extend(d,e):d={};var e=location.pathname,i="";$.each(d,function(e,t){i+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)});e+=i?"?"+i.substr(1):"";history.pushState&&window.nunjucksENV?window.anchorClick(e,{setURL:1}):location.href=e},u=(e.prototype.next=function(e,t){for(var i=$("<ul/>"),a=0;a<e.length;a++)i.append(this.render(e[a],t));return i},e.prototype.render=function(e,t){var i=this,a=$("<li/>");return a.data("data",{value:e.value,label:e.label,item:e,layer:t}),2===this.type||3===this.type?e.children?a.append('<label><input type="radio" name="l'+t+'"></label><span title="'+e.label+'">'+e.label+'</span><i class="iconfont icon-xiangyoujiantou"></i>'):a.append('<label><input type="radio" name="l'+t+'"></label><span title="'+e.label+'">'+e.label+"</span>"):e.children?a.append('<span title="'+e.label+'">'+e.label+'</span><i class="iconfont icon-xiangyoujiantou"></i>'):a.append('<span title="'+e.label+'">'+e.label+"</span>"),2===this.type||3===this.type?(a.click(function(){var e=$(this).data("data");i.values.splice(e.layer,10,e.value),i.labels.splice(e.layer,10,e.label),i.items.splice(e.layer,10,e.item);var t=$(this).parents("ul").data("parent");t&&($(t).addClass("check").siblings("li").removeClass("check"),$(t).find("input").prop("checked",!0)),$(this).addClass("check").siblings("li").removeClass("check"),$(this).find("input").prop("checked",!0),e.item.children?((t=i.next(e.item.children,e.layer+1)).data("parent",this),i.insert(t,e.layer+1)):i.$dom.find("ul").slice(e.layer+1).remove(),e.item.children||(i.callback(),i.hide(),i.$dom.find("ul").slice(e.layer+1).remove())}),a.find("input").click(function(e){var t;3===i.type&&(e.stopPropagation(),t=$(this).parents("li").data("data"),i.values.splice(t.layer,10,t.value),i.labels.splice(t.layer,10,t.label),i.items.splice(t.layer,10,t.item),(e=$(this).parents("ul").data("parent"))&&($(e).addClass("check").siblings("li").removeClass("check"),$(e).find("input").prop("checked",!0)),i.$dom.find("ul").slice(t.layer+1).remove(),$(this).parents("li").addClass("check").siblings("li").removeClass("check"),$(this).parents("li").find("input").prop("checked",!0),i.callback(),i.hide(),i.$dom.find("ul").slice(t.layer+1).remove())})):(a.mouseover(function(){var e=$(this).data("data");i.values.splice(e.layer,10,e.value),i.labels.splice(e.layer,10,e.label),i.items.splice(e.layer,10,e.item);var t=$(this).parents("ul").data("parent");t&&$(t).addClass("check").siblings("li").removeClass("check"),e.item.children?((t=i.next(e.item.children,e.layer+1)).data("parent",this),i.insert(t,e.layer+1)):i.$dom.find("ul").slice(e.layer+1).remove()}),a.click(function(){var e=$(this).data("data");e.item.children&&1!==i.type||($(this).addClass("check").siblings("li").removeClass("check"),i.callback(),i.hide(),i.$dom.find("ul").slice(e.layer+1).remove())})),a},e.prototype.insert=function(e,t){this.$dom.find("ul").slice(t).remove(),this.$dom.append(e),this.backfill_status||this.$dom.find("ul").niceScroll({cursorcolor:"#949494",autohidemode:"leave"})},e.prototype.show=function(e,t,i){var a;e?(this.$dom.attr("class","cc-cascader2"),this.$el=$(e),a=this.$el.offset(),e=e.getBoundingClientRect(),t=a.top+this.$el.height()+10,i=a.left,document.documentElement.clientHeight-e.bottom<262&&(272<e.top?(this.$dom.addClass("below"),t-=272+this.$el.height()):(this.$dom.addClass("none"),t-=(252+this.$el.height())/2)),this.$dom.css({position:"absolute",top:t+"px",left:i+"px"}).show()):this.$dom.css({position:"fixed",top:t+"px",left:i+"px"}).show(),this.backfill_status||this.$dom.find("ul").niceScroll({cursorcolor:"#949494",autohidemode:"leave"})},e.prototype.hide=function(){this.$dom.hide(),this.$el&&this.$el.find(".iconfont").removeClass("active")},e.prototype.callback=function(e){var t=$.extend([],this.values),i=$.extend([],this.labels),a=$.map(this.items,function(e){var i={};return $.each(e,function(e,t){"children"!=e&&(i[e]=t)}),i});try{this.cb(t,i,a,e)}catch(n){}},e.prototype.backfill=function(e,t){this.backfill_status=1;var i=e||[],a=[],n=[],l=this;if(i&&i.length)for(var s=0;s<i.length;s++){var c=this.$dom.find("ul")[s];$(c).find("li").removeClass("check").each(function(){var e,t=$(this).data("data");t.value==i[s]&&($(this).addClass("check").find("input").prop("checked",!0),a.push(t.label),n.push(t.item),t.item.children&&0<t.item.children.length&&s<i.length-1&&(e=l.next(t.item.children,t.layer+1),l.insert(e,t.layer+1)))})}else this.$dom.find("ul li").removeClass("check");this.values=i,this.labels=a,this.items=n,this.backfill_status=0,this.callback(t)},e);function e(e,t,i){this.cb=t,this.type=i||0,this.values=[],this.labels=[],this.items=[];e=this.next(e,0);this.$dom=$('<div class="cc-cascader2" />').hide(),this.$dom.append(e).on("click",function(e){e.stopPropagation()});var a=this;$(document).click(function(){a.hide()});try{this.$dom.get(0).addEventListener("wheel",function(e){e.preventDefault()}),this.$dom.get(0).addEventListener("mousewheel",function(e){e.preventDefault()}),this.$dom.get(0).addEventListener("DOMMouseScroll",function(e){e.preventDefault()})}catch(n){}$("body").append(this.$dom)}var p=function p(e,t){return function l(e,t,i){i===undefined&&(i=[]);for(var a=0;a<t.length;a++){var n=i.concat();if(n.push(t[a].value),e==t[a].value)return n;if(t[a].children&&(n=l(e,t[a].children,n)))return n}}(t,e)};$.getJSON("/api/cond/gongsi",function(a,e,t){var i=["industry","district","nature","scale","rank"],o={};function n(e,t){for(var i in o)i!=e&&"colse"!=i&&(t?(o[i].cascader.hide(),o[i].cascader.backfill(null,1)):(o[i].el.find(".iconfont").removeClass("active"),o[i].cascader.hide()))}function l(c,e){var t;this.cascader=new u(e,function(e,t,i,a){var n,l,s;n=c,l=t,s=a,t={},i=(a=i)[a.length-1],"industry"==n?(t.industry=i&&i.value!==undefined?i.value:"",t.depth=i&&i.depth!==undefined?i.depth:""):"district"==n?(t.province=a[0]&&a[0].value||"",t.city=a[1]&&a[1].value||""):t[n]=i&&i.value!==undefined?i.value:"",s?$.extend(d,t):h(t),o[n].el.find(".iconfont").removeClass("active"),o[n].el.find("input").val(l[l.length-1]||"").attr("title",l.join(" - ")||"")},1),this.el=$(".js-cond-"+c).click((t=this,function(e){e.stopPropagation();e=$(this).find(".iconfont");e.hasClass("active")?(e.removeClass("active"),t.cascader.hide()):(e.addClass("active"),t.cascader.show(this)),n(c)}))}for(var s,c=0;c<i.length;c+=1)a[s=i[c]]?o[s]=new l(s,a[s]):$(".js-cond-"+s).remove();function r(e){var t,i=location.search.replace(/^\?/,""),i=i?JSON.parse('{"'+decodeURIComponent(i.replace(/&/g,'","').replace(/=/g,'":"'))+'"}'):{};e&&n(null,1),i.industry&&(t=p(a.industry,i.industry)).length&&o.industry&&o.industry.cascader.backfill(t,1),(i.province||i.city)&&(e=+i.city&&-1!=i.city?+i.city:+i.province,(t=p(a.district,e)).length&&o.district&&o.district.cascader.backfill(t,1)),i.nature&&(t=p(a.nature,i.nature)).length&&o.nature&&o.nature.cascader.backfill(t,1),i.scale&&(t=p(a.scale,i.scale)).length&&o.scale&&o.scale.cascader.backfill(t,1),i.rank&&(t=p(a.rank,i.rank)).length&&o.rank&&o.rank.cascader.backfill(t,1)}$(".bjx-selectBar .btns span").click(function(){h(),n(null,1)}),r(),window.set_args=r})}();