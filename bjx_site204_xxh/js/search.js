!function(){var e,t;history.pushState&&window.nunjucksENV&&((t=/bjx:nonce=([^;]+)/.exec(document.cookie))&&t[1]&&(t=(e=Date.now())+ +t[1],$.ajax({url:"/api/get_rand",type:"POST",data:{t:e,r:t},cache:!1}).done(function(e){})),window.anchorClick=function(n,i){var e=window.net_loading();window.data_loading=1,$.ajax({url:n,type:"GET",data:"ajax=1",cache:!1,dataType:"json",timeout:1e4}).done(function(e){try{var t=window.nunjucksENV.render("search_cont.htm",e);$("#render_slot").html(t),i&&i.setURL&&history.pushState(null,null,n),i&&i.goTop&&$("html,body").scrollTop($("#render_slot").offset().top-20),e.seo&&e.seo.title&&$("title").text(e.seo.title)}catch(a){console.error(a)}}).fail(function(e){/刷新/.test(e.responseText)&&(location.href=n)}).always(function(){e.remove(),delete window.data_loading})},$(window).on("popstate",function(e){var t=location.pathname+location.search;e.preventDefault(),window.anchorClick(t),window.set_args(1)}),$("#render_slot").on("click",".cc-pagelist a",function(e){var t=$(this).attr("href");t&&"javascript:;"!==t&&(e.preventDefault(),window.anchorClick(t,{setURL:1,goTop:1}))}))}(),function(){$("input, textarea").placeholder();var r={jobs:{},cops:{}},n={type:$(".bjx-sechSWH span").filter(".checked").data("type")||"jobs",kw:$(".bjx-sechSCH input").val()||""},d=function d(e,t){t?$.extend(r[e],t):r[e]={};var e=$.extend({},n,r[e]),a="";$.each(e,function(e,t){a+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)});e="/search/result/"+(a?"?"+a.substr(1):"");history.pushState&&window.nunjucksENV?window.anchorClick(e,{setURL:1}):location.href=e};$(".bjx-sechSCH input").change(function(){n.kw=$(this).val()}),$(".bjx-sechSCH form").submit(function(e){if(e.preventDefault(),!window.data_loading){e=$(this).find("input").val()||"";if(""===e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return window.tips_popping||(window.tips_popping=1,window.msg_alert("请输入关键词",{btn1_fun:function(){delete window.tips_popping}})),!1;n.kw=e,$(".bjx-sechSWH").show(),"jobs"===n.type?($(".bjx-sechSLT").hide(),$(".js-filter-jobs").show(),d("jobs")):($(".bjx-sechSLT").hide(),$(".js-filter-cops").show(),d("cops"));try{window.obj_jobs.colse(null,1)}catch(t){console.log(t)}try{window.obj_cops.colse(null,1)}catch(t){console.log(t)}}}),$(".bjx-sechSWH span").click(function(){$(this).addClass("checked").siblings("span").removeClass("checked");var e=$(this).data();n.type=e.type,"jobs"===e.type?($(".bjx-sechSLT").hide(),$(".js-filter-jobs").show(),d("jobs")):($(".bjx-sechSLT").hide(),$(".js-filter-cops").show(),d("cops"));try{window.obj_jobs.colse(null,1)}catch(t){console.log(t)}try{window.obj_cops.colse(null,1)}catch(t){console.log(t)}});var h=(e.prototype.next=function(e,t){for(var a=$("<ul/>"),n=0;n<e.length;n++)a.append(this.render(e[n],t));return a},e.prototype.render=function(e,t){var a=this,n=$("<li/>");return n.data("data",{value:e.value,label:e.label,item:e,layer:t}),2===this.type||3===this.type?e.children?n.append('<label><input type="radio" name="l'+t+'"></label><span title="'+e.label+'">'+e.label+'</span><i class="iconfont icon-xiangyoujiantou"></i>'):n.append('<label><input type="radio" name="l'+t+'"></label><span title="'+e.label+'">'+e.label+"</span>"):e.children?n.append('<span title="'+e.label+'">'+e.label+'</span><i class="iconfont icon-xiangyoujiantou"></i>'):n.append('<span title="'+e.label+'">'+e.label+"</span>"),2===this.type||3===this.type?(n.click(function(){var e=$(this).data("data");a.values.splice(e.layer,10,e.value),a.labels.splice(e.layer,10,e.label),a.items.splice(e.layer,10,e.item);var t=$(this).parents("ul").data("parent");t&&($(t).addClass("check").siblings("li").removeClass("check"),$(t).find("input").prop("checked",!0)),$(this).addClass("check").siblings("li").removeClass("check"),$(this).find("input").prop("checked",!0),e.item.children?((t=a.next(e.item.children,e.layer+1)).data("parent",this),a.insert(t,e.layer+1)):a.$dom.find("ul").slice(e.layer+1).remove(),e.item.children||(a.callback(),a.hide(),a.$dom.find("ul").slice(e.layer+1).remove())}),n.find("input").click(function(e){var t;3===a.type&&(e.stopPropagation(),t=$(this).parents("li").data("data"),a.values.splice(t.layer,10,t.value),a.labels.splice(t.layer,10,t.label),a.items.splice(t.layer,10,t.item),(e=$(this).parents("ul").data("parent"))&&($(e).addClass("check").siblings("li").removeClass("check"),$(e).find("input").prop("checked",!0)),a.$dom.find("ul").slice(t.layer+1).remove(),$(this).parents("li").addClass("check").siblings("li").removeClass("check"),$(this).parents("li").find("input").prop("checked",!0),a.callback(),a.hide(),a.$dom.find("ul").slice(t.layer+1).remove())})):(n.mouseover(function(){var e=$(this).data("data");a.values.splice(e.layer,10,e.value),a.labels.splice(e.layer,10,e.label),a.items.splice(e.layer,10,e.item);var t=$(this).parents("ul").data("parent");t&&$(t).addClass("check").siblings("li").removeClass("check"),e.item.children?((t=a.next(e.item.children,e.layer+1)).data("parent",this),a.insert(t,e.layer+1)):a.$dom.find("ul").slice(e.layer+1).remove()}),n.click(function(){var e=$(this).data("data");e.item.children&&1!==a.type||($(this).addClass("check").siblings("li").removeClass("check"),a.callback(),a.hide(),a.$dom.find("ul").slice(e.layer+1).remove())})),n},e.prototype.insert=function(e,t){this.$dom.find("ul").slice(t).remove(),this.$dom.append(e),this.backfill_status||this.$dom.find("ul").niceScroll({cursorcolor:"#949494",autohidemode:"leave"})},e.prototype.show=function(e,t,a){var n;e?(this.$dom.attr("class","cc-cascader2"),this.$el=$(e),n=this.$el.offset(),e=e.getBoundingClientRect(),t=n.top+this.$el.height()+10,a=n.left,document.documentElement.clientHeight-e.bottom<262&&(272<e.top?(this.$dom.addClass("below"),t-=272+this.$el.height()):(this.$dom.addClass("none"),t-=(252+this.$el.height())/2)),this.$dom.css({position:"absolute",top:t+"px",left:a+"px"}).show()):this.$dom.css({position:"fixed",top:t+"px",left:a+"px"}).show(),this.backfill_status||this.$dom.find("ul").niceScroll({cursorcolor:"#949494",autohidemode:"leave"})},e.prototype.hide=function(){this.$dom.hide(),this.$el&&this.$el.find(".iconfont").removeClass("active")},e.prototype.callback=function(e){var t=$.extend([],this.values),a=$.extend([],this.labels),n=$.map(this.items,function(e){var a={};return $.each(e,function(e,t){"children"!=e&&(a[e]=t)}),a});try{this.cb(t,a,n,e)}catch(i){}},e.prototype.backfill=function(e,t){this.backfill_status=1;var a=e||[],n=[],i=[],s=this;if(a&&a.length)for(var c=0;c<a.length;c++){var o=this.$dom.find("ul")[c];$(o).find("li").removeClass("check").each(function(){var e,t=$(this).data("data");t.value==a[c]&&($(this).addClass("check").find("input").prop("checked",!0),n.push(t.label),i.push(t.item),t.item.children&&0<t.item.children.length&&c<a.length-1&&(e=s.next(t.item.children,t.layer+1),s.insert(e,t.layer+1)))})}else this.$dom.find("ul li").removeClass("check");this.values=a,this.labels=n,this.items=i,this.backfill_status=0,this.callback(t)},e);function e(e,t,a){this.cb=t,this.type=a||0,this.values=[],this.labels=[],this.items=[];e=this.next(e,0);this.$dom=$('<div class="cc-cascader2" />').hide(),this.$dom.append(e).on("click",function(e){e.stopPropagation()});var n=this;$(document).click(function(){n.hide()});try{this.$dom.get(0).addEventListener("wheel",function(e){e.preventDefault()}),this.$dom.get(0).addEventListener("mousewheel",function(e){e.preventDefault()}),this.$dom.get(0).addEventListener("DOMMouseScroll",function(e){e.preventDefault()})}catch(i){}$("body").append(this.$dom)}var o=function o(e,t){return function s(e,t,a){a===undefined&&(a=[]);for(var n=0;n<t.length;n++){var i=a.concat();if(i.push(t[n].value),e==t[n].value)return i;if(t[n].children&&(i=s(e,t[n].children,i)))return i}}(t,e)};$.getJSON("/api/cond/search",function(s,e,t){function a(o,e){var l={};function a(e,t){for(var a in l)a!=e&&"colse"!=a&&(t?(l[a].cascader.hide(),l[a].cascader.backfill(null,1)):(l[a].el.find(".iconfont").removeClass("active"),l[a].cascader.hide()))}function t(c,e){var t;this.cascader=new h(e,function(e,t,a,n){var i,s;i=c,s=t,t=n,n={},a=(a=(a=a)[a.length-1])&&a.value!==undefined?a.value:"","rank1"==i||"rank2"==i?n.rank=a:n[i]=a,t?$.extend(r[o],n):d(o,n),l[i].el.find(".iconfont").removeClass("active"),l[i].el.find("input").val(s[s.length-1]||"").attr("title",s.join(" - ")||"")},1),this.el=$(".js-filter-"+o+" .js-cond-"+c).click((t=this,function(e){e.stopPropagation();e=$(this).find(".iconfont");e.hasClass("active")?(e.removeClass("active"),t.cascader.hide()):(e.addClass("active"),t.cascader.show(this)),a(c)}))}for(var n,i=0;i<e.length;i+=1)n=e[i],s[n]?l[n]=new t(n,s[n]):$(".js-filter-"+o+" .js-cond-"+n).remove();return l.colse=a,l}var n=a("jobs",["industry","district","education","experience","salary","rank1"]),i=a("cops",["industry","district","nature","scale","rank2"]);function c(e){var t,a=location.search.replace(/^\?/,""),a=a?JSON.parse('{"'+decodeURIComponent(a.replace(/&/g,'","').replace(/=/g,'":"'))+'"}'):{};e&&(n.colse(null,1),i.colse(null,1)),"cops"===a.type?(a.industry&&(t=o(s.industry,a.industry)).length&&i.industry&&i.industry.cascader.backfill(t,1),a.district&&(t=o(s.district,a.district)).length&&i.district&&i.district.cascader.backfill(t,1),a.nature&&(t=o(s.nature,a.nature)).length&&i.nature&&i.nature.cascader.backfill(t,1),a.scale&&(t=o(s.scale,a.scale)).length&&i.scale&&i.scale.cascader.backfill(t,1),a.rank&&(t=o(s.rank2,a.rank)).length&&i.rank2&&i.rank2.cascader.backfill(t,1)):(a.industry&&(t=o(s.industry,a.industry)).length&&n.industry&&n.industry.cascader.backfill(t,1),a.district&&(t=o(s.district,a.district)).length&&n.district&&n.district.cascader.backfill(t,1),a.education&&(t=o(s.education,a.education)).length&&n.education&&n.education.cascader.backfill(t,1),a.experience&&(t=o(s.experience,a.experience)).length&&n.experience&&n.experience.cascader.backfill(t,1),a.salary&&(t=o(s.salary,a.salary)).length&&n.salary&&n.salary.cascader.backfill(t,1),a.rank&&(t=o(s.rank1,a.rank)).length&&n.rank1&&n.rank1.cascader.backfill(t,1))}window.obj_jobs=n,window.obj_cops=i,$(".js-filter-jobs .btns span").click(function(){d("jobs"),n.colse(null,1)}),$(".js-filter-cops .btns span").click(function(){d("cops"),i.colse(null,1)}),c(),window.set_args=c})}(),function(){$("#render_slot").on("click",".item",function(e){var t=$(this).find(".col0 input");t.is(":checked")?t.prop("checked",!1):t.prop("checked",!0)}),$("#render_slot").on("click",".item a",function(e){e.stopPropagation()}),$("#render_slot").on("change",".bjx-batch input",function(e){$(this).is(":checked")?$("#render_slot .item .col0 input").prop("checked",!0):$("#render_slot .item .col0 input").prop("checked",!1)}),$("#render_slot").on("click",".bjx-batch .js-follow",function(e){var t,a;1!==$(this).data("loading")&&(/bjx:uid=\d+/.test(document.cookie)?(t=[],$("#render_slot .item .col0 input:checked").each(function(){var e=$(this).data("id");e&&t.push(e)}),0!==t.length?(a=this,$(a).data("loading",1),$.ajax({url:"/api/attention_company/",type:"GET",data:{cid:t.join(","),act:1},cache:!1,dataType:"json"}).done(function(e){var t;1===e.status?window.msg_hint("关注成功",{type:"success"}):600===e.status?window.msg_alert(e.message,{btn1_fun:function(){location.href=e.data},btn2_fun:function(){location.href=e.data}}):601===e.status?location.href=e.data:(t=e.data&&e.data.Error?e.data.Error:e.message,window.msg_alert(t))}).always(function(){$(a).data("loading",0)})):window.msg_alert("请选中项目")):window.msg_alert("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}))}),$("#render_slot").on("click",".bjx-batch .js-collect",function(e){var t,a;1!==$(this).data("loading")&&(/bjx:uid=\d+/.test(document.cookie)?(t=[],$("#render_slot .item .col0 input:checked").each(function(){var e=$(this).data("id");e&&t.push(e)}),0!==t.length?(a=this,$(a).data("loading",1),$.ajax({url:"/api/collect_job/",type:"GET",data:{jid:t.join(","),act:1},cache:!1,dataType:"json"}).done(function(e){var t;1===e.status?window.msg_hint("收藏成功",{type:"success"}):600===e.status?window.msg_alert(e.message,{btn1_fun:function(){location.href=e.data},btn2_fun:function(){location.href=e.data}}):601===e.status?location.href=e.data:(t=e.data&&e.data.Error?e.data.Error:e.message,window.msg_alert(t))}).always(function(){$(a).data("loading",0)})):window.msg_alert("请选中项目")):window.msg_alert("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}}))}),$("#render_slot").on("click",".bjx-batch .js-deliver",function(e){var t,a,n,i;/bjx:uid=\d+/.test(document.cookie)?(t=[],a=[],n=[],$("#render_slot .item .col0 input:checked").each(function(){var e=$(this).data();e.id&&(e.isol?t.push(e.id):(a.push(e.id),n.push(this)))}),0!==t.length||0!==a.length?0===t.length&&1===a.length?(i=$("#js_apis_usr").val()+"/delivery/table?jid="+a[0],window.open(i)):0<t.length&&0===a.length?(i=$("#js_apis_usr").val()+"/delivery?jid="+t.join(","),window.open(i)):window.msg_alert("所选内容中包含应聘登记表投递岗位，已经为您在此次批量投递中移除，请稍后单独投递。",{btn1_fun:function(){$.each(n,function(e,t){$(t).prop("checked",!1)})}}):window.msg_alert("请选中项目")):window.msg_alert("登录后才能进行相关操作",{btn1_txt:"马上登录",btn1_fun:function(){location.href="/oidc/login/"}})});var s=1,t=0;$("#render_slot").on("click",".bjx-sechQSA ul li",function(e){$(this).addClass("checked").siblings("li").removeClass("checked"),s=$("#render_slot .bjx-sechQSA ul li").index($(this))}),$("#render_slot").on("keyup",".bjx-sechQSA textarea",function(e){$("#render_slot .bjx-sechQSA textarea").val().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")?0==t&&(t=1,$("#render_slot .bjx-sechQSA button").addClass("active")):1==t&&(t=0,$("#render_slot .bjx-sechQSA button").removeClass("active"))}),$("#render_slot").on("click",".bjx-sechQSA button",function(e){if(1!==$(this).data("loading")){var t=$("#render_slot .bjx-sechQSA textarea").val().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");if(""!==t){var a={type:0,cond:"",count:0};try{a=JSON.parse($("#js_feedback").val())}catch(i){}var a={grade:s+1,cont:t,type:"cops"===a.type?1:2,cond:a.cond&&JSON.stringify(a.cond),count:a.count},n=this;$(n).data("loading",1),$.ajax({url:"/api/search_feedback/",type:"POST",data:JSON.stringify(a),processData:!1,contentType:"application/json",cache:!1}).done(function(e){var t;1===e.status?($("#render_slot .bjx-sechQSA textarea").val(""),window.msg_hint("反馈成功",{type:"success"})):600===e.status?window.msg_alert(e.message,{btn1_fun:function(){location.href=e.data},btn2_fun:function(){location.href=e.data}}):601===e.status?location.href=e.data:(t=e.data&&e.data.Error?e.data.Error:e.message,window.msg_alert(t))}).always(function(){$(n).data("loading",0)})}else window.msg_alert("请填写反馈意见",{btn1_fun:function(){$("#render_slot .bjx-sechQSA textarea").focus()}})}})}(),function(){var t=window.localStorage&&window.localStorage.bjx_guess_index||0;function e(){var e=$(".bjx-guess .head a").data("max")||0;t=+t,(e=+e)&&e<=t?t=1:t+=1,$.get("/api/section/bjx_guess/",{index:t},function(e){-1!==e.indexOf("<")?$(".bjx-guess").replaceWith(e):t=0,window.localStorage.bjx_guess_index=t})}e(),$(".right").on("click",".bjx-guess .head a",function(){e()})}();