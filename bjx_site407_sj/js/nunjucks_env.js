!function(){var e,t=new nunjucks.Environment,n={date2name:function(e){var t=new Date,n=new Date,a=new Date,r=new Date,s=new Date;n.setDate(t.getDate()-1),n.setHours("0","0","0","0"),a.setDate(t.getDate()-2),a.setHours("0","0","0","0"),r.setDate(t.getDate()+1),r.setHours("23","59","59","999"),s.setDate(t.getDate()+2),s.setHours("23","59","59","999");var u,i=/Date\((\d+)\)/.exec(e);i&&i[1]?u=new Date(parseInt(i[1])):/\dT\d/.test(e)?u=/Z$|\+\d{2}\:\d{2}$|\+\d{4}$|\+\d{2}$/.test(e)?new Date(e):new Date(e+"+08:00"):(u=new Date(e),isNaN(u.getTime())&&(i=/(\d{4})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})/.exec(e))&&(u=new Date(i[1]+"/"+i[2]+"/"+i[3]+" "+i[4]+":"+i[5]+":"+i[6])));var g,c,o,i=t.getTime()-u.getTime();if(!isNaN(i))return 0<i?(g=i/6e4)<1?"刚刚":g<60?Math.round(g)+"分钟前":g<1440?Math.round(g/60)+"小时前":g<=(t-n)/6e4?"昨天":g<=(t-a)/6e4?"前天":u.getFullYear()+"-"+((c=u.getMonth()+1)<10?"0"+c:c)+"-"+((o=u.getDate())<10?"0"+o:o):(g=Math.abs(i/6e4))<60?Math.round(g)+"分钟后":g<1440?Math.round(g/60)+"小时后":g<=(r-t)/6e4?"明天":g<=(s-t)/6e4?"后天":u.getFullYear()+"-"+((c=u.getMonth()+1)<10?"0"+c:c)+"-"+((o=u.getDate())<10?"0"+o:o)},date2name2:function(e){var t=new Date,n=new Date,a=new Date,r=new Date,s=new Date,u=new Date,i=new Date;n.setHours("0","0","0","0"),a.setHours("23","59","59","999"),r.setDate(t.getDate()-1),r.setHours("0","0","0","0"),s.setDate(t.getDate()-2),s.setHours("0","0","0","0"),u.setDate(t.getDate()+1),u.setHours("23","59","59","999"),i.setDate(t.getDate()+2),i.setHours("23","59","59","999");var g,c=/Date\((\d+)\)/.exec(e);c&&c[1]?g=new Date(parseInt(c[1])):/\dT\d/.test(e)?g=/Z$|\+\d{2}\:\d{2}$|\+\d{4}$|\+\d{2}$/.test(e)?new Date(e):new Date(e+"+08:00"):(g=new Date(e),isNaN(g.getTime())&&(c=/(\d{4})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})/.exec(e))&&(g=new Date(c[1]+"/"+c[2]+"/"+c[3]+" "+c[4]+":"+c[5]+":"+c[6])));var o,d,l,c=t.getTime()-g.getTime();if(!isNaN(c))return 0<c?(o=c/6e4)<=(t-n)/6e4?"今天":o<=(t-r)/6e4?"昨天":o<=(t-s)/6e4?"前天":g.getFullYear()+"-"+((d=g.getMonth()+1)<10?"0"+d:d)+"-"+((l=g.getDate())<10?"0"+l:l):(o=Math.abs(c/6e4))<=(a-t)/6e4?"今天":o<=(u-t)/6e4?"明天":o<=(i-t)/6e4?"后天":g.getFullYear()+"-"+((d=g.getMonth()+1)<10?"0"+d:d)+"-"+((l=g.getDate())<10?"0"+l:l)},date_format:function(e,t){var n,a=/Date\((\d+)\)/.exec(e);a&&a[1]?n=new Date(parseInt(a[1])):/\dT\d/.test(e)?n=/Z$|\+\d{2}\:\d{2}$|\+\d{4}$|\+\d{2}$/.test(e)?new Date(e):new Date(e+"+08:00"):(n=new Date(e),isNaN(n.getTime())&&(a=/(\d{4})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})[^\d]+(\d{2})/.exec(e))&&(n=new Date(a[1]+"/"+a[2]+"/"+a[3]+" "+a[4]+":"+a[5]+":"+a[6])));var r,s={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[r]:("00"+s[r]).substr((""+s[r]).length)));return t},highlight:function(e,t){var n=/\<.*?\>/g.test(e),a=new RegExp(t,"gi");if(n){e.replace(/\<.*?\>/g,"");return e.replace(/>[^<]+</g,function(e){return e.replace(a,'<span class="highlight">$&</span>')}).replace(/^[^<]+</,function(e){return e.replace(a,'<span class="highlight">$&</span>')}).replace(/>[^<]+$/,function(e){return e.replace(a,'<span class="highlight">$&</span>')})}return e.replace(a,'<span class="highlight">$&</span>')},substr:function(e,t,n,a){return e&&"string"==typeof e?(e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/\s+/g," ")).length<n?e:a&&"string"==typeof a?e.substr(t,n)+a:e.substr(t,n):""},cn_substr:function(e,t,n,a){if(e&&"string"==typeof e){var r=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/\s+/g," "),s=0,u=0,g=!0;for(i=0;i<r.length&&!(t<=s+.5);i++)/[\u4e00-\u9fa5]/.test(r.charAt(i))||/[\uff00-\uffff]/.test(r.charAt(i))?s+=1:/\s/.test(r.charAt(i))||(s+=.5);var c=r.substr(i+1);for(j=0;j<c.length;j++){if(n<=u+.5){g=!1;break}/[\u4e00-\u9fa5]/.test(c.charAt(j))||/[\uff00-\uffff]/.test(c.charAt(j))?u+=1:/\s/.test(c.charAt(j))||(u+=.5)}return g?r:a&&"string"==typeof a?r.substr(i,j)+a:r.substr(i,j)}return""},split:function(e,t){return e&&"string"==typeof e?e.split(t=t||""):""},arr_slice:function(e,t,n){return e&&"[object Array]"==Object.prototype.toString.call(e)?(t=t||0,n?e.slice(t,n):e.slice(t)):[]},arr_join:function(e,t){return e&&"[object Array]"==Object.prototype.toString.call(e)?e.join(t=t||""):""},activate:function(e,t){return(e=e.replace("/2020",""))&&t&&("/"===t&&"/"===e||"/"!==t&&0===e.indexOf(t))?"active":""},removeHTMLTag:function(e){return e&&"string"==typeof e?e=(e=(e=e.replace(/<\/?[^>]*>/g,"")).replace(/&nbsp;/gi,"")).replace(/[\r\n|\n]/g,""):""},num2class:function(e){var t=parseFloat(e),e=Math.floor(t);return 5<t?5:0<=t&&t<=5?t==e?e:t<=e+.5?e+"5":t<=e+.9?e+1:void 0:0},trimURL:function(e){return e&&"string"==typeof e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/^http:\/\/|^https:\/\//,"").replace(/\/$/,""):""},fixURL:function(e){return e&&"string"==typeof e?/^http/.test(e)?e:"http://"+e:""},txt2html:function(e){return e&&"string"==typeof e?/<[\w\/ ]+>/.test(e)?e:e.replace(/\r\n|\n/g,"<br/>\n").replace(/ |\t|\v|\f/g,"&nbsp;"):""}};for(e in n)t.addFilter(e,n[e]);window.nunjucksENV=t}();