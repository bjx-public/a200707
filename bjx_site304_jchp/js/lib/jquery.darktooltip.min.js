/*
 * DarkTooltip v0.4.0
 * Simple customizable tooltip with confirm option and 3d effects
 * (c)2014 Rub√©n Torres - rubentdlh@gmail.com
 * Released under the MIT license
 */
(function(b){function c(a,b){this.bearer=a;this.options=b;this.hideEvent;this.mouseOverMode="hover"==this.options.trigger||"mouseover"==this.options.trigger||"onmouseover"==this.options.trigger}c.prototype={show:function(){var a=this;this.options.modal&&this.modalLayer.css("display","block");this.tooltip.css("display","block");a.mouseOverMode&&(this.tooltip.mouseover(function(){clearTimeout(a.hideEvent)}),this.tooltip.mouseout(function(){clearTimeout(a.hideEvent);a.hide()}))},hide:function(){var a=
this;this.hideEvent=setTimeout(function(){a.tooltip.hide()},100);a.options.modal&&a.modalLayer.hide();this.options.onClose()},toggle:function(){this.tooltip.is(":visible")?this.hide():this.show()},addAnimation:function(){switch(this.options.animation){case "fadeIn":this.tooltip.addClass("animated");this.tooltip.addClass("fadeIn");break;case "flipIn":this.tooltip.addClass("animated"),this.tooltip.addClass("flipIn")}},setContent:function(){b(this.bearer).css("cursor","pointer");if(this.options.content)this.content=
this.options.content;else if(this.bearer.attr("data-tooltip"))this.content=this.bearer.attr("data-tooltip");else return;if("#"==this.content.charAt(0)){if(this.options.delete_content){var a=b(this.content).html();b(this.content).html("");this.content=a;delete a}else b(this.content).hide(),this.content=b(this.content).html();this.contentType="html"}else this.contentType="text";tooltipId="";""!=this.bearer.attr("id")&&(tooltipId="id='darktooltip-"+this.bearer.attr("id")+"'");this.modalLayer=b("<ins class='darktooltip-modal-layer'></ins>");
this.tooltip=b("<ins "+tooltipId+" class = 'dark-tooltip "+this.options.theme+" "+this.options.size+" "+this.options.gravity+"'><div>"+this.content+"</div><div class = 'tip'></div></ins>");this.tip=this.tooltip.find(".tip");b("body").append(this.modalLayer);b("body").append(this.tooltip);"html"==this.contentType&&this.tooltip.css("max-width","none");this.tooltip.css("opacity",this.options.opacity);this.addAnimation();this.options.confirm&&this.addConfirm()},setPositions:function(){var a=this.bearer.offset().left,
b=this.bearer.offset().top;switch(this.options.gravity){case "south":a+=this.bearer.outerWidth()/2-this.tooltip.outerWidth()/2;b+=-this.tooltip.outerHeight()-this.tip.outerHeight()/2;break;case "west":a+=this.bearer.outerWidth()+this.tip.outerWidth()/2;b+=this.bearer.outerHeight()/2-this.tooltip.outerHeight()/2;break;case "north":a+=this.bearer.outerWidth()/2-this.tooltip.outerWidth()/2;b+=this.bearer.outerHeight()+this.tip.outerHeight()/2;break;case "east":a+=-this.tooltip.outerWidth()-this.tip.outerWidth()/
2,b+=this.bearer.outerHeight()/2-this.tooltip.outerHeight()/2}this.options.autoLeft&&this.tooltip.css("left",a);this.options.autoTop&&this.tooltip.css("top",b)},setEvents:function(){var a=this,d=a.options.hoverDelay,c;if(a.mouseOverMode)this.bearer.mouseenter(function(){c=setTimeout(function(){a.setPositions();a.show()},d)}).mouseleave(function(){clearTimeout(c);a.hide()});else if("click"==this.options.trigger||"onclik"==this.options.trigger)this.tooltip.click(function(a){a.stopPropagation()}),this.bearer.click(function(b){b.preventDefault();
a.setPositions();a.toggle();b.stopPropagation()}),b("html").click(function(){a.hide()})},activate:function(){this.setContent();this.content&&this.setEvents()},addConfirm:function(){this.tooltip.append("<ul class = 'confirm'><li class = 'darktooltip-yes'>"+this.options.yes+"</li><li class = 'darktooltip-no'>"+this.options.no+"</li></ul>");this.setConfirmEvents()},setConfirmEvents:function(){var a=this;this.tooltip.find("li.darktooltip-yes").click(function(b){a.onYes();b.stopPropagation()});this.tooltip.find("li.darktooltip-no").click(function(b){a.onNo();
b.stopPropagation()})},finalMessage:function(){if(this.options.finalMessage){var a=this;a.tooltip.find("div:first").html(this.options.finalMessage);a.tooltip.find("ul").remove();a.setPositions();setTimeout(function(){a.hide();a.setContent()},a.options.finalMessageDuration)}else this.hide()},onYes:function(){this.options.onYes(this.bearer);this.finalMessage()},onNo:function(){this.options.onNo(this.bearer);this.hide()}};b.fn.darkTooltip=function(a){return this.each(function(){a=b.extend({},b.fn.darkTooltip.defaults,
a);(new c(b(this),a)).activate()})};b.fn.darkTooltip.defaults={animation:"none",confirm:!1,content:"",finalMessage:"",finalMessageDuration:1E3,gravity:"south",hoverDelay:0,modal:!1,no:"No",onNo:function(){},onYes:function(){},opacity:.9,size:"medium",theme:"dark",trigger:"hover",yes:"Yes",autoTop:!0,autoLeft:!0,onClose:function(){}}})(jQuery);